{"version":3,"sources":["webpack:///./src/views/search/Search.vue?7c10","webpack:///./src/api/search.js","webpack:///src/views/search/Search.vue","webpack:///./src/views/search/Search.vue?93b6","webpack:///./src/views/search/Search.vue","webpack:///./src/views/search/Search.vue?8b2f","webpack:///./src/common/js/song.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","type","placeholder","domProps","on","input","$event","target","composing","query","click","handleClose","_v","_l","item","index","key","handleSearch","first","_s","handleClear","data","searchHistory","stopPropagation","handleDelete","searchState","start","keyword","resultList","result","length","matchList","handleMatchAlbum","album","id","src","optimizeImg","picUrl","artist","_e","handleMatchSinger","img1v1Url","handleSelect","singerName","staticRenderFns","getHot","axios","get","concat","URL","then","res","Promise","resolve","getSearchSuggest","getSearchMatch","getSearchResult","Searchvue_type_script_lang_js_","hotList","suggestList","suggestReady","computed","Object","objectSpread","vuex_esm","noResult","noMatch","watch","_this","timer","clearTimeout","setTimeout","_getSearchSuggest","mounted","_getHot","methods","_this2","code","config","hots","_this3","allMatch","_getSearchMatch","_getSearchResult","saveSearchHistory","_this4","_this5","songs","list","song","catch","selectPlay","deleteSearchHistory","clearSearchHistory","$router","push","search_Searchvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Search_vue_vue_type_style_index_0_id_7d6dda82_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Search_vue_vue_type_style_index_0_id_7d6dda82_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","Song","_ref","coverImg","albumName","_Users_nev_project_music_app_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","arrayToString","arr","prop","ret","forEach","join","createLatestList","artists","createPlaylist","ar","al","createSearchList"],"mappings":"yIAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BE,YAAA,QAAmB,CAAAF,EAAA,OAAYE,YAAA,eAA0B,CAAAF,EAAA,KAAUE,YAAA,0BAAoCF,EAAA,SAAcG,WAAA,EAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAV,EAAA,MAAAW,WAAA,UAAoEL,YAAA,SAAAM,MAAA,CAA8BC,KAAA,OAAAC,YAAA,QAAmCC,SAAA,CAAWL,MAAAV,EAAA,OAAoBgB,GAAA,CAAKC,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,YAAsCpB,EAAAqB,MAAAH,EAAAC,OAAAT,WAAgCN,EAAA,KAAUG,WAAA,EAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAV,EAAA,MAAAW,WAAA,UAAkEL,YAAA,wBAAAU,GAAA,CAA0CM,MAAAtB,EAAAuB,iBAAyBnB,EAAA,OAAcE,YAAA,gBAA2B,CAAAF,EAAA,MAAWE,YAAA,OAAkB,CAAAF,EAAA,MAAWE,YAAA,aAAwB,CAAAN,EAAAwB,GAAA,UAAAxB,EAAAyB,GAAAzB,EAAA,iBAAA0B,EAAAC,GAA6D,OAAAvB,EAAA,MAAgBwB,IAAAD,EAAArB,YAAA,WAAAU,GAAA,CAAqCM,MAAA,SAAAJ,GAAyB,OAAAlB,EAAA6B,aAAAH,EAAAI,UAAsC,CAAA9B,EAAAwB,GAAAxB,EAAA+B,GAAAL,EAAAI,aAA+B,GAAA1B,EAAA,OAAgBE,YAAA,WAAsB,CAAAF,EAAA,MAAWE,YAAA,iBAA4B,CAAAN,EAAAwB,GAAA,SAAApB,EAAA,KAA0BE,YAAA,sBAAAU,GAAA,CAAsCM,MAAAtB,EAAAgC,iBAAyB5B,EAAA,UAAiBE,YAAA,kBAAAM,MAAA,CAAqCqB,KAAAjC,EAAAkC,gBAA0B,CAAA9B,EAAA,KAAAJ,EAAAyB,GAAAzB,EAAA,uBAAA0B,EAAAC,GAA0D,OAAAvB,EAAA,MAAgBwB,IAAAD,EAAArB,YAAA,eAAAU,GAAA,CAAyCM,MAAA,SAAAJ,GAAyB,OAAAlB,EAAA6B,aAAAH,MAAgC,CAAA1B,EAAAwB,GAAA,qBAAAxB,EAAA+B,GAAAL,GAAA,sBAAAtB,EAAA,KAAyEE,YAAA,sBAAAU,GAAA,CAAsCM,MAAA,SAAAJ,GAAkD,OAAzBA,EAAAiB,kBAAyBnC,EAAAoC,aAAAT,WAAqC,WAAAvB,EAAA,OAAuBG,WAAA,EAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAV,EAAA,MAAAW,WAAA,UAAkEL,YAAA,kBAA+B,CAAAF,EAAA,OAAYG,WAAA,EAAaC,KAAA,OAAAC,QAAA,SAAAC,OAAAV,EAAAqC,YAAAC,MAAA3B,WAAA,uBAA4FL,YAAA,kBAA+B,CAAAF,EAAA,MAAAA,EAAA,MAAoBE,YAAA,uBAAAU,GAAA,CAAuCM,MAAA,SAAAJ,GAAyB,OAAAlB,EAAA6B,aAAA7B,EAAAqB,UAAqC,CAAArB,EAAAwB,GAAA,MAAAxB,EAAA+B,GAAA/B,EAAAqB,OAAA,OAAArB,EAAAyB,GAAAzB,EAAA,qBAAA0B,EAAAC,GAAwF,OAAAvB,EAAA,MAAgBwB,IAAAD,EAAArB,YAAA,eAAAU,GAAA,CAAyCM,MAAA,SAAAJ,GAAyB,OAAAlB,EAAA6B,aAAAH,EAAAa,YAAwC,CAAAvC,EAAAwB,GAAAxB,EAAA+B,GAAAL,EAAAa,eAAiC,KAAAnC,EAAA,UAAqBG,WAAA,EAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAV,EAAAqC,YAAA,MAAA1B,WAAA,sBAA0FL,YAAA,gBAAAM,MAAA,CAAqCqB,KAAAjC,EAAAwC,aAAuB,CAAApC,EAAA,OAAYE,YAAA,kBAA6B,CAAAF,EAAA,KAAUG,WAAA,EAAaC,KAAA,OAAAC,QAAA,SAAAC,OAAAV,EAAAqC,YAAAI,QAAA,IAAAzC,EAAAwC,WAAAE,OAAA/B,WAAA,gDAAkJ,CAAAX,EAAAwB,GAAA,YAAApB,EAAA,KAA6BG,WAAA,EAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAV,EAAA,SAAAW,WAAA,cAA0E,CAAAX,EAAAwB,GAAA,YAAApB,EAAA,MAA8BG,WAAA,EAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAV,EAAA,QAAAW,WAAA,YAAsEL,YAAA,SAAsB,CAAAF,EAAA,MAAAJ,EAAAwB,GAAA,UAAAxB,EAAA2C,UAAA,MAAAvC,EAAA,MAA2DE,YAAA,yBAAAU,GAAA,CAAyCM,MAAA,SAAAJ,GAAyB,OAAAlB,EAAA4C,iBAAA5C,EAAA2C,UAAAE,MAAA,GAAAC,OAAyD,CAAA1C,EAAA,OAAYE,YAAA,SAAoB,CAAAF,EAAA,OAAYQ,MAAA,CAAOmC,IAAA/C,EAAAgD,YAAAhD,EAAA2C,UAAAE,MAAA,GAAAI,aAAsD7C,EAAA,OAAcE,YAAA,QAAmB,CAAAF,EAAA,MAAAJ,EAAAwB,GAAA,MAAAxB,EAAA+B,GAAA/B,EAAA2C,UAAAE,MAAA,GAAArC,SAAAJ,EAAA,KAAAJ,EAAAwB,GAAAxB,EAAA+B,GAAA/B,EAAA2C,UAAAE,MAAA,GAAAK,OAAA1C,WAAAJ,EAAA,KAAsIE,YAAA,0BAAkCN,EAAAmD,KAAAnD,EAAA2C,UAAA,OAAAvC,EAAA,MAA6CE,YAAA,yBAAAU,GAAA,CAAyCM,MAAA,SAAAJ,GAAyB,OAAAlB,EAAAoD,kBAAApD,EAAA2C,UAAAO,OAAA,GAAAJ,OAA2D,CAAA1C,EAAA,OAAYE,YAAA,SAAoB,CAAAF,EAAA,OAAYQ,MAAA,CAAOmC,IAAA/C,EAAAgD,YAAAhD,EAAA2C,UAAAO,OAAA,GAAAG,gBAA0DjD,EAAA,OAAcE,YAAA,QAAmB,CAAAF,EAAA,MAAAJ,EAAAwB,GAAA,MAAAxB,EAAA+B,GAAA/B,EAAA2C,UAAAO,OAAA,GAAA1C,WAAAJ,EAAA,KAA0EE,YAAA,0BAAkCN,EAAAmD,OAAA/C,EAAA,MAAwBE,YAAA,QAAmBN,EAAAyB,GAAAzB,EAAA,oBAAA0B,EAAAC,GAA8C,OAAAvB,EAAA,MAAgBwB,IAAAF,EAAAoB,GAAAxC,YAAA,wBAAAU,GAAA,CAAoDM,MAAA,SAAAJ,GAAyB,OAAAlB,EAAAsD,aAAA3B,MAAiC,CAAAvB,EAAA,OAAYE,YAAA,QAAmB,CAAAF,EAAA,MAAWE,YAAA,aAAwB,CAAAN,EAAAwB,GAAAxB,EAAA+B,GAAAL,EAAAlB,SAAAJ,EAAA,KAAsCE,YAAA,eAA0B,CAAAN,EAAAwB,GAAAxB,EAAA+B,GAAAL,EAAA6B,iBAAAnD,EAAA,KAA8CE,YAAA,6BAAuC,aAAAF,EAAA,kBAAAA,EAAA,wBAC/nIoD,EAAA,gDCEO,SAASC,IACd,OAAOC,IAAMC,IAAN,GAAAC,OAAaC,OAAb,gBAA+BC,KAAK,SAAAC,GACzC,OAAOC,QAAQC,QAAQF,EAAI9B,QAIxB,SAASiC,EAAkB3B,GAChC,OAAOmB,IAAMC,IAAN,GAAAC,OAAaC,OAAb,6BAAAD,OAA4CrB,EAA5C,iBAAmEuB,KAAK,SAAAC,GAC7E,OAAOC,QAAQC,QAAQF,EAAI9B,QAIxB,SAASkC,EAAgB5B,GAC9B,OAAOmB,IAAMC,IAAN,GAAAC,OAAaC,OAAb,gCAAAD,OAA+CrB,IAAWuB,KAAK,SAAAC,GACpE,OAAOC,QAAQC,QAAQF,EAAI9B,QAIxB,SAASmC,EAAiB7B,GAC/B,OAAOmB,IAAMC,IAAN,GAAAC,OAAaC,OAAb,qBAAAD,OAAoCrB,IAAWuB,KAAK,SAAAC,GACzD,OAAOC,QAAQC,QAAQF,EAAI9B,oCCoF/BoC,EAAA,CACA7D,KAAA,SACAyB,KAFA,WAGA,OACAqC,QAAA,GACAjD,MAAA,GACAkD,YAAA,GACA5B,UAAA,GACAH,WAAA,GACAH,YAAA,CACAC,OAAA,EACAG,QAAA,EACA+B,cAAA,KAIAC,SAAAC,OAAAC,EAAA,KAAAD,CAAA,GACAA,OAAAE,EAAA,KAAAF,CAAA,CACA,kBAFA,CAIAG,SAJA,WAKA,OAAA5E,KAAAoC,YAAAI,QAAA,IAAAxC,KAAAuC,WAAAE,SAAAzC,KAAA6E,SAEAA,QAPA,WAQA,OAAA7E,KAAA0C,UAAAE,OAAA5C,KAAA0C,UAAAO,UAGA6B,MAAA,CACA1D,MADA,WACA,IAAA2D,EAAA/E,KACA,GAAAA,KAAAoC,YAAAmC,aAGA,QAAAvE,KAAAoB,MACApB,KAAAsE,YAAA,OACA,CACA,IAAAU,EAAA,KACAA,GACAC,aAAAD,GAEAA,EAAAE,WAAA,WACAH,EAAAI,kBAAAJ,EAAA3D,QACA,QAIAgE,QA7CA,WA8CApF,KAAAqF,WAEAC,QAAAb,OAAAC,EAAA,KAAAD,CAAA,GACAA,OAAAE,EAAA,KAAAF,CAAA,CACA,aACA,oBACA,sBACA,uBALA,CAOAY,QAPA,WAOA,IAAAE,EAAAvF,KACAwD,IAAAK,KAAA,SAAAC,GACAA,EAAA0B,OAAAC,EAAA,OACAF,EAAAlB,QAAAP,EAAAtB,OAAAkD,SAIAP,kBAdA,SAcA/D,GAAA,IAAAuE,EAAA3F,KACAA,KAAAoC,YAAAC,OAAA,EACArC,KAAAoB,OAGA6C,EAAA7C,GAAAyC,KAAA,SAAAC,GACAA,EAAA0B,OAAAC,EAAA,OACAE,EAAArB,YAAAR,EAAAtB,OAAAoD,aAIAhE,aAzBA,SAyBAU,GACAtC,KAAAoB,MAAAkB,EACAtC,KAAAoC,YAAAmC,cAAA,EACAvE,KAAAoC,YAAAC,OAAA,EACArC,KAAAoC,YAAAI,QAAA,EACAxC,KAAA0C,UAAA,GACA1C,KAAAuC,WAAA,GACAvC,KAAA6F,gBAAAvD,GACAtC,KAAA8F,iBAAAxD,GACAtC,KAAA+F,kBAAAzD,IAEAuD,gBApCA,SAoCAvD,GAAA,IAAA0D,EAAAhG,KACAkE,EAAA5B,GAAAuB,KAAA,SAAAC,GACAA,EAAA0B,OAAAC,EAAA,OACAO,EAAAtD,UAAAoB,EAAAtB,WAIAsD,iBA3CA,SA2CAxD,GAAA,IAAA2D,EAAAjG,KACAmE,EAAA7B,GAAAuB,KAAA,SAAAC,GACA,GAAAA,EAAA0B,OAAAC,EAAA,MACA,GAAA3B,EAAAtB,OAAA0D,MAAA,CACA,IAAAC,EAAArC,EAAAtB,OAAA0D,MACAD,EAAA1D,WAAAkC,OAAA2B,EAAA,KAAA3B,CAAA0B,QAEAF,EAAA1D,WAAA,GAEA0D,EAAA7D,YAAAI,QAAA,EACAyD,EAAA7D,YAAAmC,cAAA,KAEA8B,MAAA,WACAJ,EAAA1D,WAAA,GACA0D,EAAA7D,YAAAI,QAAA,EACAyD,EAAA7D,YAAAmC,cAAA,KAGAjD,YA7DA,WA8DAtB,KAAAoB,MAAA,IAEAiC,aAhEA,SAgEA3B,GACA1B,KAAAsG,WAAA,CACAH,KAAAnG,KAAAuC,WACAb,WAGAS,aAtEA,SAsEAT,GACA1B,KAAAuG,oBAAA7E,IAEAK,YAzEA,WA0EA/B,KAAAwG,sBAEArD,kBA5EA,SA4EAN,GACA7C,KAAAyG,QAAAC,KAAA,kBAAA/C,OAAAd,KAEAF,iBA/EA,SA+EAE,GACA7C,KAAAyG,QAAAC,KAAA,iBAAA/C,OAAAd,KAEAE,YAlFA,SAkFAD,GACA,OAAAA,EAAA,+BC9O+V6D,EAAA,0BCQ/VC,EAAgBnC,OAAAoC,EAAA,KAAApC,CACdkC,EACA7G,EACAyD,GACF,EACA,KACA,WACA,MAIeuD,EAAA,WAAAF,6CCnBf,IAAAG,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAA0jBE,EAAG,yKCAhjBE,EACX,SAAAA,EAAAC,GAA4D,IAA7CvE,EAA6CuE,EAA7CvE,GAAItC,EAAyC6G,EAAzC7G,KAAM+C,EAAmC8D,EAAnC9D,WAAY+D,EAAuBD,EAAvBC,SAAUC,EAAaF,EAAbE,UAAa7C,OAAA8C,EAAA,KAAA9C,CAAAzE,KAAAmH,GAC1DnH,KAAK6C,GAAKA,EACV7C,KAAKO,KAAOA,EACZP,KAAKsD,WAAaA,EAClBtD,KAAKqH,SAAWA,EAChBrH,KAAKsH,UAAYA,GAId,SAASE,EAAeC,EAAKC,GAClC,IAAMC,EAAM,GACZ,OAAKF,GAGLA,EAAIG,QAAQ,SAAAnG,GACVkG,EAAIjB,KAAKjF,EAAKiG,MAETC,EAAIE,KAAK,MALP,GAQJ,SAASC,EAAkBL,GAChC,IAAME,EAAM,GAUZ,OATAF,EAAIG,QAAQ,SAAAnG,GACVkG,EAAIjB,KAAK,IAAIS,EAAK,CAChBtE,GAAIpB,EAAKoB,GACTtC,KAAMkB,EAAKlB,KACX+C,WAAYkE,EAAc/F,EAAK2E,KAAK2B,QAAS,QAC7CV,SAAU5F,EAAK2E,KAAKxD,MAAMI,OAC1BsE,UAAW7F,EAAK2E,KAAKxD,MAAMrC,UAGxBoH,EAGF,SAASK,EAAgBP,GAC9B,IAAME,EAAM,GAUZ,OATAF,EAAIG,QAAQ,SAAAnG,GACVkG,EAAIjB,KAAK,IAAIS,EAAK,CAChBtE,GAAIpB,EAAKoB,GACTtC,KAAMkB,EAAKlB,KACX+C,WAAYkE,EAAc/F,EAAKwG,GAAI,QACnCZ,SAAU5F,EAAKyG,GAAGlF,OAClBsE,UAAW7F,EAAKyG,GAAG3H,UAGhBoH,EAGF,SAASQ,EAAkBV,GAChC,IAAME,EAAM,GAUZ,OATAF,EAAIG,QAAQ,SAAAnG,GACVkG,EAAIjB,KAAK,IAAIS,EAAK,CAChBtE,GAAIpB,EAAKoB,GACTtC,KAAMkB,EAAKlB,KACX+C,WAAYkE,EAAc/F,EAAKsG,QAAS,QACxCV,SAAU,GACVC,UAAW7F,EAAKmB,MAAMrC,UAGnBoH","file":"js/search.ea1cd66b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"search-wrap\"},[_c('i',{staticClass:\"iconfont icon-search1\"}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.query),expression:\"query\"}],staticClass:\"search\",attrs:{\"type\":\"text\",\"placeholder\":\"搜索歌曲\"},domProps:{\"value\":(_vm.query)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.query=$event.target.value}}}),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.query),expression:\"query\"}],staticClass:\"iconfont icon-close-s\",on:{\"click\":_vm.handleClose}})]),_c('div',{staticClass:\"search-query\"},[_c('dl',{staticClass:\"hot\"},[_c('dt',{staticClass:\"hot-title\"},[_vm._v(\"热门搜索\")]),_vm._l((_vm.hotList),function(item,index){return _c('dd',{key:index,staticClass:\"hot-item\",on:{\"click\":function($event){return _vm.handleSearch(item.first)}}},[_vm._v(_vm._s(item.first))])})],2),_c('div',{staticClass:\"history\"},[_c('h3',{staticClass:\"history-title\"},[_vm._v(\"搜索历史 \"),_c('i',{staticClass:\"iconfont icon-clear\",on:{\"click\":_vm.handleClear}})]),_c('scroll',{staticClass:\"history-content\",attrs:{\"data\":_vm.searchHistory}},[_c('ul',_vm._l((_vm.searchHistory),function(item,index){return _c('li',{key:index,staticClass:\"history-item\",on:{\"click\":function($event){return _vm.handleSearch(item)}}},[_vm._v(\"\\n                \"+_vm._s(item)+\"\\n                \"),_c('i',{staticClass:\"iconfont icon-close\",on:{\"click\":function($event){$event.stopPropagation();return _vm.handleDelete(index)}}})])}),0)])],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.query),expression:\"query\"}],staticClass:\"search-content\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.searchState.start),expression:\"!searchState.start\"}],staticClass:\"search-suggest\"},[_c('ul',[_c('li',{staticClass:\"suggest-item keyword\",on:{\"click\":function($event){return _vm.handleSearch(_vm.query)}}},[_vm._v(\"搜索\\\"\"+_vm._s(_vm.query)+\"\\\"\")]),_vm._l((_vm.suggestList),function(item,index){return _c('li',{key:index,staticClass:\"suggest-item\",on:{\"click\":function($event){return _vm.handleSearch(item.keyword)}}},[_vm._v(_vm._s(item.keyword))])})],2)]),_c('scroll',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchState.start),expression:\"searchState.start\"}],staticClass:\"search-result\",attrs:{\"data\":_vm.resultList}},[_c('div',{staticClass:\"result-content\"},[_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.searchState.result&&_vm.resultList.length===0),expression:\"!searchState.result&&resultList.length===0\"}]},[_vm._v(\"搜索中...\")]),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.noResult),expression:\"noResult\"}]},[_vm._v(\"暂无搜索结果\")]),_c('dl',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.noMatch),expression:\"noMatch\"}],staticClass:\"match\"},[_c('dt',[_vm._v(\"最佳匹配\")]),(_vm.matchList.album)?_c('dd',{staticClass:\"result-item match-item\",on:{\"click\":function($event){return _vm.handleMatchAlbum(_vm.matchList.album[0].id)}}},[_c('div',{staticClass:\"cover\"},[_c('img',{attrs:{\"src\":_vm.optimizeImg(_vm.matchList.album[0].picUrl)}})]),_c('div',{staticClass:\"desc\"},[_c('h4',[_vm._v(\"专辑：\"+_vm._s(_vm.matchList.album[0].name))]),_c('p',[_vm._v(_vm._s(_vm.matchList.album[0].artist.name))])]),_c('i',{staticClass:\"iconfont icon-ahead\"})]):_vm._e(),(_vm.matchList.artist)?_c('dd',{staticClass:\"result-item match-item\",on:{\"click\":function($event){return _vm.handleMatchSinger(_vm.matchList.artist[0].id)}}},[_c('div',{staticClass:\"cover\"},[_c('img',{attrs:{\"src\":_vm.optimizeImg(_vm.matchList.artist[0].img1v1Url)}})]),_c('div',{staticClass:\"desc\"},[_c('h4',[_vm._v(\"歌手：\"+_vm._s(_vm.matchList.artist[0].name))])]),_c('i',{staticClass:\"iconfont icon-ahead\"})]):_vm._e()]),_c('ul',{staticClass:\"song\"},_vm._l((_vm.resultList),function(item,index){return _c('li',{key:item.id,staticClass:\"result-item song-item\",on:{\"click\":function($event){return _vm.handleSelect(index)}}},[_c('div',{staticClass:\"desc\"},[_c('h4',{staticClass:\"song-name\"},[_vm._v(_vm._s(item.name))]),_c('p',{staticClass:\"singer-name\"},[_vm._v(_vm._s(item.singerName))])]),_c('i',{staticClass:\"iconfont icon-play-s\"})])}),0)])])],1)]),_c('animation-fade',[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { URL } from './config'\nimport axios from 'axios'\n\nexport function getHot () {\n  return axios.get(`${URL}/search/hot`).then(res => {\n    return Promise.resolve(res.data)\n  })\n}\n\nexport function getSearchSuggest (keyword) {\n  return axios.get(`${URL}/search/suggest?keywords=${keyword}&type=mobile`).then(res => {\n    return Promise.resolve(res.data)\n  })\n}\n\nexport function getSearchMatch (keyword) {\n  return axios.get(`${URL}/search/multimatch?keywords=${keyword}`).then(res => {\n    return Promise.resolve(res.data)\n  })\n}\n\nexport function getSearchResult (keyword) {\n  return axios.get(`${URL}/search?keywords=${keyword}`).then(res => {\n    return Promise.resolve(res.data)\n  })\n}\n","<template>\n  <div>\n    <div class=\"wrap\">\n      <div class=\"search-wrap\">\n        <i class=\"iconfont icon-search1\"></i>\n        <input\n          class=\"search\"\n          type=\"text\"\n          placeholder=\"搜索歌曲\"\n          v-model=\"query\"\n        >\n        <i class=\"iconfont icon-close-s\" v-show=\"query\" @click=\"handleClose\"></i>\n      </div>\n      <div class=\"search-query\">\n        <dl class=\"hot\">\n            <dt class=\"hot-title\">热门搜索</dt>\n            <dd\n              class=\"hot-item\"\n              v-for=\"(item, index) of hotList\"\n              :key=\"index\"\n              @click=\"handleSearch(item.first)\"\n            >{{item.first}}</dd>\n          </dl>\n          <div class=\"history\">\n            <h3 class=\"history-title\">搜索历史 <i class=\"iconfont icon-clear\" @click=\"handleClear\"></i></h3>\n            <scroll class=\"history-content\" :data=\"searchHistory\">\n              <ul>\n                <li\n                  class=\"history-item\"\n                  v-for=\"(item, index) of searchHistory\"\n                  :key=\"index\"\n                  @click=\"handleSearch(item)\"\n                >\n                  {{item}}\n                  <i class=\"iconfont icon-close\" @click.stop=\"handleDelete(index)\"></i>\n                </li>\n              </ul>\n            </scroll>\n          </div>\n      </div>\n      <div class=\"search-content\" v-show=\"query\">\n        <div class=\"search-suggest\" v-show=\"!searchState.start\">\n          <ul>\n            <li class=\"suggest-item keyword\" @click=\"handleSearch(query)\">搜索\"{{query}}\"</li>\n            <li class=\"suggest-item\"\n              v-for=\"(item, index) of suggestList\"\n              :key=\"index\"\n              @click=\"handleSearch(item.keyword)\"\n            >{{item.keyword}}</li>\n          </ul>\n        </div>\n        <scroll class=\"search-result\" v-show=\"searchState.start\" :data=\"resultList\">\n          <div class=\"result-content\">\n            <p v-show=\"!searchState.result&&resultList.length===0\">搜索中...</p>\n            <p v-show=\"noResult\">暂无搜索结果</p>\n            <dl class=\"match\" v-show=\"noMatch\">\n              <dt>最佳匹配</dt>\n              <dd class=\"result-item match-item\" v-if=\"matchList.album\" @click=\"handleMatchAlbum(matchList.album[0].id)\">\n                <div class=\"cover\">\n                  <img :src=\"optimizeImg(matchList.album[0].picUrl)\">\n                </div>\n                <div class=\"desc\">\n                  <h4>专辑：{{matchList.album[0].name}}</h4>\n                  <p>{{matchList.album[0].artist.name}}</p>\n                </div>\n                <i class=\"iconfont icon-ahead\"></i>\n              </dd>\n              <dd class=\"result-item match-item\" v-if=\"matchList.artist\" @click=\"handleMatchSinger(matchList.artist[0].id)\">\n                <div class=\"cover\">\n                  <img :src=\"optimizeImg(matchList.artist[0].img1v1Url)\">\n                </div>\n                <div class=\"desc\">\n                  <h4>歌手：{{matchList.artist[0].name}}</h4>\n                </div>\n                <i class=\"iconfont icon-ahead\"></i>\n              </dd>\n            </dl>\n            <ul class=\"song\">\n              <li\n                class=\"result-item song-item\"\n                v-for=\"(item, index) of resultList\"\n                :key=\"item.id\"\n                @click=\"handleSelect(index)\"\n              >\n                <div class=\"desc\">\n                  <h4 class=\"song-name\">{{item.name}}</h4>\n                  <p class=\"singer-name\">{{item.singerName}}</p>\n                </div>\n                <i class=\"iconfont icon-play-s\"></i>\n              </li>\n            </ul>\n          </div>\n        </scroll>\n      </div>\n    </div>\n    <animation-fade>\n      <router-view></router-view>\n    </animation-fade>\n  </div>\n</template>\n\n<script>\nimport { getHot, getSearchSuggest, getSearchMatch, getSearchResult } from 'api/search'\nimport { ERR_OK } from 'api/config'\nimport { createSearchList } from 'common/js/song'\nimport { mapGetters, mapActions } from 'vuex'\n\nexport default {\n  name: 'search',\n  data () {\n    return {\n      hotList: [],\n      query: '',\n      suggestList: [],\n      matchList: {},\n      resultList: [],\n      searchState: {\n        start: false,\n        result: false,\n        suggestReady: true\n      }\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'searchHistory'\n    ]),\n    noResult () {\n      return this.searchState.result && this.resultList.length === 0 && !this.noMatch\n    },\n    noMatch () {\n      return this.matchList.album || this.matchList.artist\n    }\n  },\n  watch: {\n    query () {\n      if (!this.searchState.suggestReady) {\n        return\n      }\n      if (this.query === '') {\n        this.suggestList = []\n      } else {\n        let timer = null\n        if (timer) {\n          clearTimeout(timer)\n        }\n        timer = setTimeout(() => {\n          this._getSearchSuggest(this.query)\n        }, 300)\n      }\n    }\n  },\n  mounted () {\n    this._getHot()\n  },\n  methods: {\n    ...mapActions([\n      'selectPlay',\n      'saveSearchHistory',\n      'deleteSearchHistory',\n      'clearSearchHistory'\n    ]),\n    _getHot () {\n      getHot().then(res => {\n        if (res.code === ERR_OK) {\n          this.hotList = res.result.hots\n        }\n      })\n    },\n    _getSearchSuggest (query) {\n      this.searchState.start = false\n      if (!this.query) {\n        return\n      }\n      getSearchSuggest(query).then(res => {\n        if (res.code === ERR_OK) {\n          this.suggestList = res.result.allMatch\n        }\n      })\n    },\n    handleSearch (keyword) {\n      this.query = keyword\n      this.searchState.suggestReady = false\n      this.searchState.start = true\n      this.searchState.result = false\n      this.matchList = {}\n      this.resultList = []\n      this._getSearchMatch(keyword)\n      this._getSearchResult(keyword)\n      this.saveSearchHistory(keyword)\n    },\n    _getSearchMatch (keyword) {\n      getSearchMatch(keyword).then(res => {\n        if (res.code === ERR_OK) {\n          this.matchList = res.result\n        }\n      })\n    },\n    _getSearchResult (keyword) {\n      getSearchResult(keyword).then(res => {\n        if (res.code === ERR_OK) {\n          if (res.result.songs) {\n            const list = res.result.songs\n            this.resultList = createSearchList(list)\n          } else {\n            this.resultList = []\n          }\n          this.searchState.result = true\n          this.searchState.suggestReady = true\n        }\n      }).catch(() => {\n        this.resultList = []\n        this.searchState.result = true\n        this.searchState.suggestReady = true\n      })\n    },\n    handleClose () {\n      this.query = ''\n    },\n    handleSelect (index) {\n      this.selectPlay({\n        list: this.resultList,\n        index: index\n      })\n    },\n    handleDelete (index) {\n      this.deleteSearchHistory(index)\n    },\n    handleClear () {\n      this.clearSearchHistory()\n    },\n    handleMatchSinger (id) {\n      this.$router.push(`/search/singer/${id}`)\n    },\n    handleMatchAlbum (id) {\n      this.$router.push(`/search/album/${id}`)\n    },\n    optimizeImg (src) {\n      return src + '?param=140y140&type=webp'\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.wrap\n  position: absolute\n  top: 1.52rem\n  right: 0\n  bottom: 0\n  left: 0\n  .search-wrap\n    position: relative\n    margin: .4rem .2rem\n    line-height: .6rem\n    border-radius: .08rem\n    background-color: #eee\n    .icon-search1\n      position: absolute\n      top: .04rem\n      left: .1rem\n      color: #666\n    .search\n      width: 100%\n      text-indent: .6rem\n      background-color: #eee\n    .icon-close-s\n      position: absolute\n      top: .04rem\n      right: .1rem\n      color: #666\n  .search-query\n    position: absolute\n    top: 1.4rem\n    right: 0\n    bottom: 0\n    left: 0\n    overflow: auto\n    .hot\n      padding: 0 .2rem\n      overflow: hidden\n      .hot-title\n        line-height: .5rem\n        font-size: .3rem\n        color: #999\n      .hot-item\n        float: left\n        margin-right: .2rem\n        margin-bottom: .2rem\n        padding: .16rem\n        border: .01rem solid #ccc\n        border-radius: .08rem\n    .history\n      position: absolute\n      top: 3.5rem\n      right: 0\n      bottom: 0\n      left: 0\n      .history-title\n        padding: 0 .2rem\n        line-height: 1rem\n        font-size: .3rem\n        color: #999\n        .iconfont\n          float: right\n          margin-right: .2rem\n      .history-content\n        position: absolute\n        top: 1rem\n        right: 0\n        bottom: 0\n        left: 0\n        overflow: hidden\n        padding: 0 .2rem\n        .history-item\n          line-height: 1rem\n          fong-size: .3rem\n          border-bottom: .01rem solid #eee\n          .iconfont\n            float: right\n            margin-right: .2rem\n  .search-content\n    position: absolute\n    top: 1.4rem\n    right: 0\n    bottom: 0\n    left: 0\n    // overflow: hidden\n    background: #fff\n    .search-suggest\n      position: absolute\n      top: 0\n      right: 0\n      bottom: 0\n      left: 0\n      p\n        line-height: .8rem\n        font-size: .36rem\n        color: #333\n        border-bottom: .01rem solid #eee\n      ul\n        padding: 0 .3rem\n        .suggest-item\n          line-height: .8rem\n          font-size: .36rem\n          color: #333\n          border-bottom: .01rem solid #eee\n        .keyword\n          color: red\n    .search-result\n      position: absolute\n      top: 0\n      right: 0\n      bottom: 0\n      left: 0\n      padding: 0 .3rem\n      overflow: hidden\n      .result-item\n        position: relative\n        height: 1.2rem\n        color: #333\n        border-bottom: .01rem solid #eee\n        .cover\n          float: left\n          width: 1rem\n          height: 1rem\n          padding: .1rem 0\n          margin-right: .4rem\n          img\n            width: 100%\n        .desc\n          float: left\n          display: flex\n          flex-direction: column\n          justify-content: center\n          width: 70%\n          height: 1.2rem\n          h4\n            line-height: .5rem\n            font-size: .32rem\n            white-space: nowrap\n            overflow: hidden\n            text-overflow: ellipsis\n          p\n            line-height: .36rem\n            font-size: .25rem\n            color: #999\n            white-space: nowrap\n            overflow: hidden\n            text-overflow: ellipsis\n        .iconfont\n          position: absolute\n          top: 50%\n          right: .2rem\n          transform: translateY(-50%)\n          font-size: .5rem\n          color: #999\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=7d6dda82&scoped=true&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&id=7d6dda82&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d6dda82\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=7d6dda82&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=7d6dda82&lang=stylus&scoped=true&\"","export class Song {\n  constructor ({ id, name, singerName, coverImg, albumName }) {\n    this.id = id\n    this.name = name\n    this.singerName = singerName\n    this.coverImg = coverImg\n    this.albumName = albumName\n  }\n}\n\nexport function arrayToString (arr, prop) {\n  const ret = []\n  if (!arr) {\n    return ''\n  }\n  arr.forEach(item => {\n    ret.push(item[prop])\n  })\n  return ret.join('/')\n}\n\nexport function createLatestList (arr) {\n  const ret = []\n  arr.forEach(item => {\n    ret.push(new Song({\n      id: item.id,\n      name: item.name,\n      singerName: arrayToString(item.song.artists, 'name'),\n      coverImg: item.song.album.picUrl,\n      albumName: item.song.album.name\n    }))\n  })\n  return ret\n}\n\nexport function createPlaylist (arr) {\n  const ret = []\n  arr.forEach(item => {\n    ret.push(new Song({\n      id: item.id,\n      name: item.name,\n      singerName: arrayToString(item.ar, 'name'),\n      coverImg: item.al.picUrl,\n      albumName: item.al.name\n    }))\n  })\n  return ret\n}\n\nexport function createSearchList (arr) {\n  const ret = []\n  arr.forEach(item => {\n    ret.push(new Song({\n      id: item.id,\n      name: item.name,\n      singerName: arrayToString(item.artists, 'name'),\n      coverImg: '',\n      albumName: item.album.name\n    }))\n  })\n  return ret\n}\n"],"sourceRoot":""}