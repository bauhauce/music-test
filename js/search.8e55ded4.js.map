{"version":3,"sources":["webpack:///./src/views/search/Search.vue?977c","webpack:///./src/views/search/Search.vue?28f1","webpack:///./src/api/search.js","webpack:///src/views/search/Search.vue","webpack:///./src/views/search/Search.vue?93b6","webpack:///./src/views/search/Search.vue","webpack:///./src/common/js/song.js"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Search_vue_vue_type_style_index_0_id_bff05856_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Search_vue_vue_type_style_index_0_id_bff05856_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","type","placeholder","domProps","on","input","$event","target","composing","query","click","handleClose","_v","_l","item","index","key","handleSearch","first","_s","handleClear","stopPropagation","handleDelete","searchState","start","keyword","result","resultList","length","matchList","handleMatchAlbum","album","id","src","picUrl","artist","_e","handleMatchSinger","img1v1Url","handleSelect","singerName","staticRenderFns","getHot","axios","get","concat","URL","then","res","Promise","resolve","data","getSearchSuggest","getSearchMatch","getSearchResult","Searchvue_type_script_lang_js_","hotList","suggestList","suggestReady","computed","Object","objectSpread","vuex_esm","noResult","noMatch","watch","_this","timer","clearTimeout","setTimeout","_getSearchSuggest","mounted","_getHot","methods","addSearchHistory","deleteSearchHistory","clearSearchHistory","_this2","code","config","hots","_this3","allMatch","_getSearchMatch","_getSearchResult","_this4","_this5","songs","list","song","catch","selectPlay","$router","push","search_Searchvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","Song","_ref","coverImg","albumName","_Users_nev_project_music_app_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","arrayToString","arr","prop","ret","forEach","join","createLatestList","artists","createPlaylist","ar","al","createSearchList"],"mappings":"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","file":"js/search.8e55ded4.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=bff05856&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=bff05856&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"search-wrap\"},[_c('i',{staticClass:\"iconfont icon-search1\"}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.query),expression:\"query\"}],staticClass:\"search\",attrs:{\"type\":\"text\",\"placeholder\":\"搜索歌曲\"},domProps:{\"value\":(_vm.query)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.query=$event.target.value}}}),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.query),expression:\"query\"}],staticClass:\"iconfont icon-close-s\",on:{\"click\":_vm.handleClose}})]),_c('div',{staticClass:\"search-query\"},[_c('dl',{staticClass:\"hot\"},[_c('dt',{staticClass:\"hot-title\"},[_vm._v(\"热门搜索\")]),_vm._l((_vm.hotList),function(item,index){return _c('dd',{key:index,staticClass:\"hot-item\",on:{\"click\":function($event){return _vm.handleSearch(item.first)}}},[_vm._v(_vm._s(item.first))])})],2),_c('dl',{staticClass:\"history\"},[_c('dt',{staticClass:\"history-title\"},[_vm._v(\"搜索历史 \"),_c('i',{staticClass:\"iconfont icon-clear\",on:{\"click\":_vm.handleClear}})]),_vm._l((_vm.searchHistory),function(item,index){return _c('dd',{key:index,staticClass:\"history-item\",on:{\"click\":function($event){return _vm.handleSearch(item)}}},[_vm._v(\"\\n            \"+_vm._s(item)+\"\\n            \"),_c('i',{staticClass:\"iconfont icon-close\",on:{\"click\":function($event){$event.stopPropagation();return _vm.handleDelete(index)}}})])})],2)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.query),expression:\"query\"}],staticClass:\"search-content\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.searchState.start),expression:\"!searchState.start\"}],staticClass:\"search-suggest\"},[_c('ul',[_c('li',{staticClass:\"suggest-item keyword\",on:{\"click\":function($event){return _vm.handleSearch(_vm.query)}}},[_vm._v(\"搜索\\\"\"+_vm._s(_vm.query)+\"\\\"\")]),_vm._l((_vm.suggestList),function(item,index){return _c('li',{key:index,staticClass:\"suggest-item\",on:{\"click\":function($event){return _vm.handleSearch(item.keyword)}}},[_vm._v(_vm._s(item.keyword))])})],2)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchState.start),expression:\"searchState.start\"}],staticClass:\"search-result\"},[_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.searchState.result&&_vm.resultList.length===0),expression:\"!searchState.result&&resultList.length===0\"}]},[_vm._v(\"搜索中...\")]),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.noResult),expression:\"noResult\"}]},[_vm._v(\"暂无搜索结果\")]),_c('dl',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.noMatch),expression:\"noMatch\"}],staticClass:\"match\"},[_c('dt',[_vm._v(\"最佳匹配\")]),(_vm.matchList.album)?_c('dd',{staticClass:\"result-item match-item\",on:{\"click\":function($event){return _vm.handleMatchAlbum(_vm.matchList.album[0].id)}}},[_c('div',{staticClass:\"cover\"},[_c('img',{attrs:{\"src\":_vm.matchList.album[0].picUrl}})]),_c('div',{staticClass:\"desc\"},[_c('h4',[_vm._v(\"专辑：\"+_vm._s(_vm.matchList.album[0].name))]),_c('p',[_vm._v(_vm._s(_vm.matchList.album[0].artist.name))])]),_c('i',{staticClass:\"iconfont icon-ahead\"})]):_vm._e(),(_vm.matchList.artist)?_c('dd',{staticClass:\"result-item match-item\",on:{\"click\":function($event){return _vm.handleMatchSinger(_vm.matchList.artist[0].id)}}},[_c('div',{staticClass:\"cover\"},[_c('img',{attrs:{\"src\":_vm.matchList.artist[0].img1v1Url}})]),_c('div',{staticClass:\"desc\"},[_c('h4',[_vm._v(\"歌手：\"+_vm._s(_vm.matchList.artist[0].name))])]),_c('i',{staticClass:\"iconfont icon-ahead\"})]):_vm._e()]),_c('ul',{staticClass:\"song\"},_vm._l((_vm.resultList),function(item,index){return _c('li',{key:item.id,staticClass:\"result-item song-item\",on:{\"click\":function($event){return _vm.handleSelect(index)}}},[_c('div',{staticClass:\"desc\"},[_c('h4',{staticClass:\"song-name\"},[_vm._v(_vm._s(item.name))]),_c('p',{staticClass:\"singer-name\"},[_vm._v(_vm._s(item.singerName))])]),_c('i',{staticClass:\"iconfont icon-play-s\"})])}),0)])])]),_c('animation-fade',[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { URL } from './config'\nimport axios from 'axios'\n\nexport function getHot () {\n  return axios.get(`${URL}/search/hot`).then(res => {\n    return Promise.resolve(res.data)\n  })\n}\n\nexport function getSearchSuggest (keyword) {\n  return axios.get(`${URL}/search/suggest?keywords=${keyword}&type=mobile`).then(res => {\n    return Promise.resolve(res.data)\n  })\n}\n\nexport function getSearchMatch (keyword) {\n  return axios.get(`${URL}/search/multimatch?keywords=${keyword}`).then(res => {\n    return Promise.resolve(res.data)\n  })\n}\n\nexport function getSearchResult (keyword) {\n  return axios.get(`${URL}/search?keywords=${keyword}`).then(res => {\n    return Promise.resolve(res.data)\n  })\n}\n","<template>\n  <div>\n    <div class=\"wrap\">\n      <div class=\"search-wrap\">\n        <i class=\"iconfont icon-search1\"></i>\n        <input\n          class=\"search\"\n          type=\"text\"\n          placeholder=\"搜索歌曲\"\n          v-model=\"query\"\n        >\n        <i class=\"iconfont icon-close-s\" v-show=\"query\" @click=\"handleClose\"></i>\n      </div>\n      <div class=\"search-query\">\n        <dl class=\"hot\">\n            <dt class=\"hot-title\">热门搜索</dt>\n            <dd\n              class=\"hot-item\"\n              v-for=\"(item, index) of hotList\"\n              :key=\"index\"\n              @click=\"handleSearch(item.first)\"\n            >{{item.first}}</dd>\n          </dl>\n          <dl class=\"history\">\n            <dt class=\"history-title\">搜索历史 <i class=\"iconfont icon-clear\" @click=\"handleClear\"></i></dt>\n            <dd\n              class=\"history-item\"\n              v-for=\"(item, index) of searchHistory\"\n              :key=\"index\"\n              @click=\"handleSearch(item)\"\n            >\n              {{item}}\n              <i class=\"iconfont icon-close\" @click.stop=\"handleDelete(index)\"></i>\n            </dd>\n          </dl>\n      </div>\n      <div class=\"search-content\" v-show=\"query\">\n        <div class=\"search-suggest\" v-show=\"!searchState.start\">\n          <ul>\n            <li class=\"suggest-item keyword\" @click=\"handleSearch(query)\">搜索\"{{query}}\"</li>\n            <li class=\"suggest-item\"\n              v-for=\"(item, index) of suggestList\"\n              :key=\"index\"\n              @click=\"handleSearch(item.keyword)\"\n            >{{item.keyword}}</li>\n          </ul>\n        </div>\n        <div class=\"search-result\" v-show=\"searchState.start\">\n          <p v-show=\"!searchState.result&&resultList.length===0\">搜索中...</p>\n          <p v-show=\"noResult\">暂无搜索结果</p>\n          <dl class=\"match\" v-show=\"noMatch\">\n            <dt>最佳匹配</dt>\n            <dd class=\"result-item match-item\" v-if=\"matchList.album\" @click=\"handleMatchAlbum(matchList.album[0].id)\">\n              <div class=\"cover\">\n                <img :src=\"matchList.album[0].picUrl\">\n              </div>\n              <div class=\"desc\">\n                <h4>专辑：{{matchList.album[0].name}}</h4>\n                <p>{{matchList.album[0].artist.name}}</p>\n              </div>\n              <i class=\"iconfont icon-ahead\"></i>\n            </dd>\n            <dd class=\"result-item match-item\" v-if=\"matchList.artist\" @click=\"handleMatchSinger(matchList.artist[0].id)\">\n              <div class=\"cover\">\n                <img :src=\"matchList.artist[0].img1v1Url\">\n              </div>\n              <div class=\"desc\">\n                <h4>歌手：{{matchList.artist[0].name}}</h4>\n              </div>\n              <i class=\"iconfont icon-ahead\"></i>\n            </dd>\n          </dl>\n          <ul class=\"song\">\n            <li\n              class=\"result-item song-item\"\n              v-for=\"(item, index) of resultList\"\n              :key=\"item.id\"\n              @click=\"handleSelect(index)\"\n            >\n              <div class=\"desc\">\n                <h4 class=\"song-name\">{{item.name}}</h4>\n                <p class=\"singer-name\">{{item.singerName}}</p>\n              </div>\n              <i class=\"iconfont icon-play-s\"></i>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    <animation-fade>\n      <router-view></router-view>\n    </animation-fade>\n  </div>\n</template>\n\n<script>\nimport { getHot, getSearchSuggest, getSearchMatch, getSearchResult } from 'api/search'\nimport { ERR_OK } from 'api/config'\nimport { createSearchList } from 'common/js/song'\nimport { mapGetters, mapMutations, mapActions } from 'vuex'\n\nexport default {\n  name: 'search',\n  data () {\n    return {\n      hotList: [],\n      query: '',\n      suggestList: [],\n      matchList: {},\n      resultList: [],\n      searchState: {\n        start: false,\n        result: false,\n        suggestReady: true\n      }\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'searchHistory'\n    ]),\n    noResult () {\n      return this.searchState.result && this.resultList.length === 0 && !this.noMatch\n    },\n    noMatch () {\n      return this.matchList.album || this.matchList.artist\n    }\n  },\n  watch: {\n    query () {\n      if (!this.searchState.suggestReady) {\n        return\n      }\n      if (this.query === '') {\n        this.suggestList = []\n      } else {\n        let timer = null\n        if (timer) {\n          clearTimeout(timer)\n        }\n        timer = setTimeout(() => {\n          this._getSearchSuggest(this.query)\n        }, 300)\n      }\n    }\n  },\n  mounted () {\n    this._getHot()\n  },\n  methods: {\n    ...mapMutations({\n      addSearchHistory: 'ADD_SEARCH_HISTORY',\n      deleteSearchHistory: 'DELETE_SEARCH_HISTORY',\n      clearSearchHistory: 'CLEAR_SEARCH_HISTORY'\n    }),\n    ...mapActions([\n      'selectPlay'\n    ]),\n    _getHot () {\n      getHot().then(res => {\n        if (res.code === ERR_OK) {\n          this.hotList = res.result.hots\n        }\n      })\n    },\n    _getSearchSuggest (query) {\n      this.searchState.start = false\n      if (!this.query) {\n        return\n      }\n      getSearchSuggest(query).then(res => {\n        if (res.code === ERR_OK) {\n          this.suggestList = res.result.allMatch\n        }\n      })\n    },\n    handleSearch (keyword) {\n      this.query = keyword\n      this.searchState.suggestReady = false\n      this.searchState.start = true\n      this.searchState.result = false\n      this.matchList = {}\n      this.resultList = []\n      this._getSearchMatch(keyword)\n      this._getSearchResult(keyword)\n      this.addSearchHistory(keyword)\n    },\n    _getSearchMatch (keyword) {\n      getSearchMatch(keyword).then(res => {\n        if (res.code === ERR_OK) {\n          this.matchList = res.result\n        }\n      })\n    },\n    _getSearchResult (keyword) {\n      getSearchResult(keyword).then(res => {\n        if (res.code === ERR_OK) {\n          if (res.result.songs) {\n            const list = res.result.songs\n            this.resultList = createSearchList(list)\n          } else {\n            this.resultList = []\n          }\n          this.searchState.result = true\n          this.searchState.suggestReady = true\n        }\n      }).catch(() => {\n        this.resultList = []\n        this.searchState.result = true\n        this.searchState.suggestReady = true\n      })\n    },\n    handleClose () {\n      this.query = ''\n    },\n    handleSelect (index) {\n      this.selectPlay({\n        list: this.resultList,\n        index: index\n      })\n    },\n    handleDelete (index) {\n      this.deleteSearchHistory(index)\n    },\n    handleClear () {\n      this.clearSearchHistory()\n    },\n    handleMatchSinger (id) {\n      this.$router.push(`/search/singer/${id}`)\n    },\n    handleMatchAlbum (id) {\n      this.$router.push(`/search/album/${id}`)\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.wrap\n  position: absolute\n  top: 1.52rem\n  right: 0\n  bottom: 0\n  left: 0\n  .search-wrap\n    position: relative\n    margin: .4rem .2rem\n    line-height: .6rem\n    border-radius: .08rem\n    background-color: #eee\n    .icon-search1\n      position: absolute\n      top: .04rem\n      left: .1rem\n      color: #666\n    .search\n      width: 100%\n      text-indent: .6rem\n      background-color: #eee\n    .icon-close-s\n      position: absolute\n      top: .04rem\n      right: .1rem\n      color: #666\n  .search-query\n    position: absolute\n    top: 1.4rem\n    right: 0\n    bottom: 0\n    left: 0\n    overflow: auto\n    .hot\n      padding: 0 .2rem\n      overflow: hidden\n      .hot-title\n        line-height: .5rem\n        font-size: .3rem\n        color: #999\n      .hot-item\n        float: left\n        margin-right: .2rem\n        margin-bottom: .2rem\n        padding: .16rem\n        border: .01rem solid #ccc\n        border-radius: .08rem\n    .history\n      padding: 0 .2rem\n      overfloa: auto\n      .history-title\n        line-height: 1rem\n        font-size: .3rem\n        color: #999\n        .iconfont\n          float: right\n          margin-right: .2rem\n      .history-item\n        line-height: 1rem\n        fong-size: .3rem\n        border-bottom: .01rem solid #eee\n        .iconfont\n          float: right\n          margin-right: .2rem\n  .search-content\n    position: absolute\n    top: 1.4rem\n    right: 0\n    bottom: 0\n    left: 0\n    overflow: auto\n    background: #fff\n    .search-suggest\n      position: absolute\n      top: 0\n      right: 0\n      bottom: 0\n      left: 0\n      p\n        line-height: .8rem\n        font-size: .36rem\n        color: #333\n        border-bottom: .01rem solid #eee\n      ul\n        padding: 0 .3rem\n        .suggest-item\n          line-height: .8rem\n          font-size: .36rem\n          color: #333\n          border-bottom: .01rem solid #eee\n        .keyword\n          color: red\n    .search-result\n      position: absolute\n      top: 0\n      right: 0\n      bottom: 0\n      left: 0\n      padding: 0 .3rem\n      .result-item\n        position: relative\n        height: 1.2rem\n        color: #333\n        border-bottom: .01rem solid #eee\n        .cover\n          float: left\n          width: 1rem\n          height: 1rem\n          padding: .1rem 0\n          margin-right: .4rem\n          img\n            width: 100%\n        .desc\n          float: left\n          display: flex\n          flex-direction: column\n          justify-content: center\n          width: 70%\n          height: 1.2rem\n          h4\n            line-height: .5rem\n            font-size: .32rem\n            white-space: nowrap\n            overflow: hidden\n            text-overflow: ellipsis\n          p\n            line-height: .36rem\n            font-size: .25rem\n            color: #999\n            white-space: nowrap\n            overflow: hidden\n            text-overflow: ellipsis\n        .iconfont\n          position: absolute\n          top: 50%\n          right: .2rem\n          transform: translateY(-50%)\n          font-size: .5rem\n          color: #999\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=bff05856&scoped=true&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&id=bff05856&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bff05856\",\n  null\n  \n)\n\nexport default component.exports","export class Song {\n  constructor ({ id, name, singerName, coverImg, albumName }) {\n    this.id = id\n    this.name = name\n    this.singerName = singerName\n    this.coverImg = coverImg\n    this.albumName = albumName\n  }\n}\n\nexport function arrayToString (arr, prop) {\n  const ret = []\n  if (!arr) {\n    return ''\n  }\n  arr.forEach(item => {\n    ret.push(item[prop])\n  })\n  return ret.join('/')\n}\n\nexport function createLatestList (arr) {\n  const ret = []\n  arr.forEach(item => {\n    ret.push(new Song({\n      id: item.id,\n      name: item.name,\n      singerName: arrayToString(item.song.artists, 'name'),\n      coverImg: item.song.album.picUrl,\n      albumName: item.song.album.name\n    }))\n  })\n  return ret\n}\n\nexport function createPlaylist (arr) {\n  const ret = []\n  arr.forEach(item => {\n    ret.push(new Song({\n      id: item.id,\n      name: item.name,\n      singerName: arrayToString(item.ar, 'name'),\n      coverImg: item.al.picUrl,\n      albumName: item.al.name\n    }))\n  })\n  return ret\n}\n\nexport function createSearchList (arr) {\n  const ret = []\n  arr.forEach(item => {\n    ret.push(new Song({\n      id: item.id,\n      name: item.name,\n      singerName: arrayToString(item.artists, 'name'),\n      coverImg: '',\n      albumName: item.album.name\n    }))\n  })\n  return ret\n}\n"],"sourceRoot":""}